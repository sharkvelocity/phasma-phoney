<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<title>PhasmaPhoney</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="Shark-Blades" name="author"/>
<meta content="Turn-based ghost hunting strategy game based on Phasmophobia." name="description"/>
<meta content="PhasmaPhoney, Phasmophobia, ghost, game, ADA, investigation" name="keywords"/>
<meta content="game" property="og:type"/>
<meta content="PhasmaPhoney" property="og:site_name"/>
<meta content="2zaxjMijj2SXwFDx3Fe6sQUNzXXZiAAkAP92q6ZFWSg" name="google-site-verification"/>
<style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      width: 100%;
      background: #000;
      font-family: monospace;
      color: #0ff;
      overflow: hidden;
    }
    #flash-overlay, #orb-canvas, #clouds1, #clouds2 {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
    }
    #flash-overlay {
      background: white;
      opacity: 0;
      z-index: 9999;
    }
    #orb-canvas {
      z-index: 199;
    }
    #clouds1, #clouds2 {
      z-index: 200;
      background-repeat: repeat-x;
      background-size: cover;
    }
    #clouds1 {
      background: linear-gradient(to right, rgba(255,255,255,0.05), rgba(0,0,0,0));
      opacity: 0.4;
      animation: cloudDrift1 80s linear infinite;
    }
    #clouds2 {
      background: linear-gradient(to right, rgba(255,255,255,0.08), rgba(0,0,0,0));
      opacity: 0.3;
      animation: cloudDrift2 120s linear infinite;
    }
    @keyframes cloudDrift1 {
      0% { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
    @keyframes cloudDrift2 {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    #background-logo {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: url("./logo.png") center center no-repeat;
      background-size: contain;
      opacity: 0.1;
      z-index: -4;
    }
    #title-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: black;
      z-index: 5000;
    }
    #title-screen button {
      font-size: 24px;
      padding: 16px 32px;
      background: #111;
      color: #eee;
      border: 2px solid #444;
      cursor: pointer;
    }
  </style>
</head>
<body>
<!-- Layered effects -->
<div id="clouds1"></div>
<div id="clouds2"></div>
<div id="flash-overlay"></div>
<canvas id="orb-canvas"></canvas>
<div id="background-logo"></div>
<!-- Title Screen -->
<div id="title-screen">
<img alt="PhasmaPhoney" src="./logo.png" style="max-width: 80%; margin-bottom: 30px;"/>
<button onclick="startLoadout()">Start Investigation</button>
<p style="margin-top: 10px; font-style: italic;">Deo: ‚ÄúHope your guesswork's better than your flashlight.‚Äù</p>
</div>
<!-- Loadout Screen -->
<div id="loadout-screen" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;
       background:#000;color:#0ff;z-index:5000;padding:20px;font-family:monospace;overflow-y:auto;">
<h2 style="text-align:center;">Select Your Loadout (Pick 3 Items)</h2>
<div id="item-selection" style="display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin:20px 0;">
<!-- Items populated by script -->
</div>
<div style="text-align:center;margin-top:20px;">
<button onclick="confirmLoadout()" style="padding:10px 20px;font-size:16px;">Confirm</button>
</div>
</div>
<!-- ADA Command Modal -->
<div id="ada-modal" style="display:none;position:fixed;top:50%;left:50%;
       transform:translate(-50%,-50%);z-index:9999;background:#111;padding:20px;
       border-radius:10px;box-shadow:0 0 20px rgba(0,0,0,0.8);width:90%;
       max-width:600px;height:80%;color:#0ff;font-family:monospace;">
<div id="ada-log" style="height:70%;overflow-y:auto;padding:10px;
          background:#000;border:1px solid #333;margin-bottom:10px;">
      ADA: Investigation interface activated.
    </div>
<!-- ADA Buttons Interface -->
<div id="ada-buttons" style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-bottom:10px;">
<button onclick="handleAdaCommand('map')">üó∫ Map</button>
<button onclick="handleAdaCommand('move')">üö™ Move</button>
<button onclick="openItemUsePopup()">üéí Use Item</button>
<button onclick="handleAdaCommand('inventory')">üì¶ Inventory</button>
<button onclick="openGuess()">üëª Guess Ghost</button>
<button onclick="handleAdaCommand('end')">üö´ End</button>
</div>
<div id="status-bar">
      Turn: <span id="turn-counter">0</span> | Sanity: <span id="sanity-bar">100</span>%
    </div>
</div>
<!-- ITEM USE POPUP -->
<div id="item-use-popup" style="display:none;position:fixed;top:50%;left:50%;
  transform:translate(-50%,-50%);background:#111;padding:20px;border-radius:10px;
  border:2px solid #0ff;z-index:10000;width:90%;max-width:400px;">
<h2 style="color:#0ff;text-align:center;">Select an item to use</h2>
<div id="item-use-list" style="margin-top:12px;display:flex;flex-direction:column;gap:8px;"></div>
<button onclick="closeItemUsePopup()" style="margin-top:12px;background:#000;
    border:1px solid #0ff;color:#0ff;padding:6px 12px;cursor:pointer;">Cancel</button>
</div>
<!-- GHOST GUESSING MODAL -->
<div id="guess-popup" style="display:none;position:fixed;top:50%;left:50%;
  transform:translate(-50%,-50%);background:#111;padding:20px;border-radius:10px;
  border:2px solid #0ff;z-index:10000;width:90%;max-width:600px;">
<h2 style="color:#0ff;text-align:center;">Who do you think the ghost is?</h2>
<div id="guess-list" style="max-height:300px;overflow-y:auto;display:grid;
    grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:6px;margin-top:12px;"></div>
<button onclick="closeGuess()" style="margin-top:12px;background:#000;
    border:1px solid #0ff;color:#0ff;padding:6px 12px;cursor:pointer;">Cancel</button>
</div>
<!-- END SCREEN -->
<div id="end-screen" style="display:none;position:fixed;top:50%;left:50%;
  transform:translate(-50%,-50%);background:#111;padding:20px;border-radius:10px;
  border:2px solid #0ff;z-index:10000;width:90%;max-width:500px;text-align:center;
  font-family:monospace;color:#0ff;">
<div id="end-message" style="margin-bottom:16px;"></div>
<button onclick="startNewGame()" style="background:#000;border:1px solid #0ff;
    color:#0ff;padding:6px 16px;cursor:pointer;">üîÅ Start New Game</button>
</div>
<div id="loadout-screen" style="display:none;position:fixed;top:50%;left:50%;
  transform:translate(-50%,-50%);background:#111;padding:20px;
  border-radius:10px;border:2px solid #0ff;z-index:10000;width:90%;
  max-width:500px;color:#0ff;font-family:monospace;text-align:center;">
<h2>Select 3 items to bring (Notebook &amp; Lighter are automatic)</h2>
<div id="item-selection" style="display:flex;flex-wrap:wrap;gap:8px;
    justify-content:center;margin-top:10px;">
<!-- checkboxes dynamically inserted -->
</div>
<button onclick="confirmLoadout()" style="margin-top:12px;
    padding:6px 12px;background:#000;border:1px solid #0ff;color:#0ff;">
    Confirm Loadout
  </button>
</div>
    <script>
// === Start Loadout Trigger Function ===
function startLoadout() {
  document.getElementById("title-screen").style.display = "none";
  showLoadoutMenu();
}
</script>

<script>
function startLoadout() {
  document.getElementById("title-screen").style.display = "none";
  showLoadoutMenu(); // This is already defined and populates the loadout UI
}


// === Item Use Modal ===
function openItemUsePopup() {
  const list = document.getElementById("item-use-list");
  list.innerHTML = "";
  game.inventory.forEach(item => {
    const btn = document.createElement("button");
    btn.textContent = item;
    btn.onclick = () => {
      useItem(item);
      closeItemUsePopup();
    };
    list.appendChild(btn);
  });
  document.getElementById("item-use-popup").style.display = "block";
}

function closeItemUsePopup() {
  document.getElementById("item-use-popup").style.display = "none";
}

function useItem(item) {
  const lower = item.toLowerCase();
  if (lower === "smudge") {
    simulateTyping("You used a Smudge Stick. The area feels momentarily safer.");
    game.protections.smudgeCount--;
    if (game.protections.smudgeCount <= 0) {
      game.inventory = game.inventory.filter(i => i !== item);
    }
  } else if (lower === "emf") {
    simulateTyping("You scan the room with the EMF reader...");
  } else {
    simulateTyping(`You use the ${item}.`);
  }
}
</script>

<script>
// === End Screen Restart Logic ===
function startNewGame() {
  window.location.reload();
}
</script>



<script>
function lightningFlash() {
  const flash = document.getElementById('flash-overlay');
  if (!flash) return;
  flash.style.opacity = '0.4';
  setTimeout(() => {
    flash.style.opacity = '0';
  }, 100);
}
setInterval(() => {
  setTimeout(lightningFlash, Math.random() * 2000);
}, 10000);
</script>
<script>
const canvas = document.getElementById('orb-canvas');
const ctx = canvas.getContext('2d');
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

function createOrb() {
  return {
    x: Math.random() * width,
    y: Math.random() * height,
    vx: (Math.random() - 0.5) * 0.8,
    vy: (Math.random() - 0.5) * 0.8,
    baseRadius: Math.random() * 2 + 1,
    radius: 1,
    opacity: 0,
    fadeIn: true,
    tick: 0,
    changeInterval: Math.floor(Math.random() * 100 + 50)
  };
}

let orbs = Array.from({ length: 12 }, createOrb);

function animateOrbs() {
  ctx.clearRect(0, 0, width, height);
  orbs.forEach((orb, i) => {
    orb.tick++;
    orb.radius = orb.baseRadius + Math.sin(orb.tick / 30) * 0.5;

    // Fade in/out
    if (orb.fadeIn) {
      orb.opacity += 0.01;
      if (orb.opacity >= 0.7) orb.fadeIn = false;
    } else {
      orb.opacity -= 0.001;
    }

    // Respawn if invisible
    if (orb.opacity <= 0.01) {
      orbs[i] = createOrb();
      return;
    }

    // Drift change
    if (orb.tick % orb.changeInterval === 0) {
      let angle = Math.random() * Math.PI * 2;
      let speed = Math.sqrt(orb.vx ** 2 + orb.vy ** 2);
      orb.vx = Math.cos(angle) * speed;
      orb.vy = Math.sin(angle) * speed;
    }

    // Move
    orb.x += orb.vx;
    orb.y += orb.vy;

    // Bounce
    if (orb.x <= 0 || orb.x >= width) orb.vx *= -1;
    if (orb.y <= 0 || orb.y >= height) orb.vy *= -1;

    // Draw
    ctx.beginPath();
    ctx.arc(orb.x, orb.y, orb.radius, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(255,255,255,${orb.opacity})`;
    ctx.shadowColor = `rgba(255,255,255,${orb.opacity * 0.6})`;
    ctx.shadowBlur = 10 + orb.opacity * 10;
    ctx.fill();
  });

  requestAnimationFrame(animateOrbs);
}

animateOrbs();

window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});
</script>
<footer>
  Shark‚ÄëBlades ‚Äî Phasma‚ÄëPhoney Prototype Web Build
  <span class="version-tag" onclick="document.getElementById('changelog-modal').style.display = 'block'">
    Build v1.4.0
  </span>
</footer>
<div id="changelog-modal" style="display:none;position:fixed;top:50%;left:50%;
  transform:translate(-50%,-50%);background:#111;padding:20px;
  border:2px solid #0ff;border-radius:10px;z-index:9999;color:#0ff;
  font-family:monospace;width:90%;max-width:500px;text-align:left;">
<h2 style="margin-top:0;color:#0ff;">Phasma‚ÄëPhoney v1.4.0</h2>
<ul style="padding-left:20px;font-size:0.95em;">
<li>‚úÖ Interactive ADA UI (button-based)</li>
<li>‚úÖ Full ghost guessing modal</li>
<li>‚úÖ Animated floating spirit particles (orbs)</li>
<li>‚úÖ Lightning flash effects every few seconds</li>
<li>‚úÖ Item use interface + consumable tracking</li>
<li>‚úÖ End-game result + "Start New Game" logic</li>
</ul>
<button onclick="document.getElementById('changelog-modal').style.display = 'none'" style="margin-top:12px;background:#000;border:1px solid #0ff;
                 color:#0ff;padding:6px 12px;cursor:pointer;">
    Close
  </button>
</div>
<script>
const ghostProfiles = {
  spirit: { intro: "Spirits are common and quiet.", behavior: "You hear faint whispers behind you." },
  wraith: { intro: "Wraiths float and avoid salt.", behavior: "No footprints follow the noise..." },
  poltergeist: { intro: "Poltergeists hurl objects violently.", behavior: "Crash! Something hits the wall!" },
  banshee: { intro: "Banshees target one person relentlessly.", behavior: "A distant lullaby drifts through the air..." },
  jinn: { intro: "Jinns are territorial and fast.", behavior: "Electronics surge with static!" },
  mare: { intro: "Mares thrive in darkness.", behavior: "Lights go out and a chill follows." },
  revenant: { intro: "Revenants move fast when hunting.", behavior: "Heavy steps speed up suddenly!" },
  shade: { intro: "Shades are shy and quiet.", behavior: "Silence deeper than normal surrounds you." },
  demon: { intro: "Demons attack often and early.", behavior: "Growl... the air turns hostile!" },
  yurei: { intro: "Yureis drain sanity and slam doors.", behavior: "The door slams shut violently." },
  oni: { intro: "Onis are active and strong.", behavior: "A burst of movement rushes past!" },
  yokai: { intro: "Yokais react to voices.", behavior: "Echoes mimic your voice from behind." },
  hantu: { intro: "Hantus thrive in cold.", behavior: "Your breath freezes midair." },
  goryo: { intro: "Goryos show only through video.", behavior: "The screen flickers with a faint shape." },
  myling: { intro: "Mylings are silent killers.", behavior: "Loud steps. Then... silence." },
  onryo: { intro: "Onryos react to extinguished fire.", behavior: "The candle goes out‚Äîthen a hiss!" },
  "the twins": { intro: "The Twins act unpredictably.", behavior: "Noise erupts from two places at once!" },
  raiju: { intro: "Raijus gain strength from electronics.", behavior: "Everything buzzes unnaturally loud!" },
  obake: { intro: "Obakes leave smudged prints.", behavior: "A distorted handprint fades fast." },
  "the mimic": { intro: "The Mimic mimics other ghosts.", behavior: "Inconsistent signs surround you..." },
  moroi: { intro: "Morois curse and weaken you.", behavior: "A headache grows as whispers crawl in." },
  deogen: { intro: "Deogens know where you are.", behavior: "It tracks you‚Äîslowly, but always." },
  thaye: { intro: "Thaye ages over time.", behavior: "Its presence feels... older, calmer." },
  succubus: { intro: "The Succubus lures and terrifies.", behavior: "A seductive chill brushes your skin." }
};

const introDialogues = [
  "Deo: I've got a bad feeling about this one...",
  "Deo: This isn‚Äôt a story‚Äîit‚Äôs real. Stay alert.",
  "Deo: Watch the shadows. They‚Äôre watching you.",
  "Deo: Let‚Äôs see what kind of ghost we‚Äôve drawn.",
  "Deo: Hope your guesswork‚Äôs better than your flashlight."
];
</script>
</body></html>
