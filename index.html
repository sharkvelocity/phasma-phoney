<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>PhasmaPhoney</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="author" content="Shark-Blades" />
  <meta name="description" content="Turn-based ghost hunting strategy game based on Phasmophobia." />
  <meta name="keywords" content="PhasmaPhoney, Phasmophobia, ghost, hunting, game, HTML" />
  <meta property="og:type" content="article" />
  <meta property="og:site_name" content="PhasmaPhoney" />
  <meta property="og:url" content="http://www." />
  <meta name="google-site-verification" content="2zaxjMijj2SXwFDx3Fe6sQUNzXXZiAAkAP92q6ZFWSg" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      width: 100%;
      background-color: #000;
      font-family: Helvetica, Arial, sans-serif;
    }

    #flash-overlay, #orb-canvas, #clouds1, #clouds2 {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9999;
    }

    #clouds1, #clouds2 {
      width: 300%;
      z-index: 200;
    }

    #clouds1 {
      background: linear-gradient(to right, rgba(255,255,255,0.05), rgba(0,0,0,0));
      opacity: 0.4;
      filter: blur(10px);
      animation: cloudDrift1 80s linear infinite;
    }

    #clouds2 {
      background: linear-gradient(to right, rgba(255,255,255,0.08), rgba(0,0,0,0));
      opacity: 0.3;
      filter: blur(14px);
      animation: cloudDrift2 120s linear infinite;
    }

    @keyframes cloudDrift1 {
      from { transform: translateX(0); }
      to { transform: translateX(-50%); }
    }

    @keyframes cloudDrift2 {
      from { transform: translateX(100%); }
      to { transform: translateX(-100%); }
    }

    #background-logo {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background-image: url("./logo.png");
      background-repeat: no-repeat;
      background-position: center center;
      background-size: contain;
      opacity: 0.1;
      z-index: -4;
    }

    #background-image {
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background-image: url("");
      background-size: cover;
      background-position: center;
      z-index: -3;
    }

    @keyframes typing-blink {
      0%, 100% { opacity: 0; }
      50% { opacity: 1; }
    }

    #ada-typing {
      font-family: monospace;
      color: #0ff;
      display: inline-block;
      margin-left: 4px;
      animation: typing-blink 1s infinite;
    }

    #status-bar {
      margin-top: 10px;
      font-family: monospace;
      color: #0ff;
    }

    footer {
      position: fixed;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 0.9em;
      font-family: sans-serif;
      z-index: 9999;
    }

    @media (max-width: 600px) {
      #start-button-ada {
        font-size: 18px !important;
        padding: 12px 30px !important;
      }
      #ada-modal {
        width: 95% !important;
        padding: 12px !important;
      }
      #ada-log {
        font-size: 13px !important;
      }
    }
  </style>
</head>
<body>
  <!-- Ambient Layers -->
  <div id="flash-overlay"></div>
  <div id="clouds1"></div>
  <div id="clouds2"></div>
  <canvas id="orb-canvas"></canvas>
  <div id="background-logo"></div>
  <div id="background-image"></div>

  <!-- Title Screen -->
  <div id="main-menu" style="text-align: center; color: white; margin-top: 40px;">
    <ul style="list-style-type: none; padding: 0; font-size: 1.2em;">
      <button id="start-button-ada"
              onclick="startAda()"
              style="position:absolute;top:35%;left:50%;transform:translateX(-50%);
                     padding:16px 48px;font-size:24px;z-index:5000;
                     background:#111;color:#eee;border:2px solid #666;cursor:pointer;">
        Start
      </button>
    </ul>
    <p style="font-style: italic; font-size: 0.95em;">
      Deo: ‚ÄúWelcome back, PhasmaPhoney. Let‚Äôs hope your deduction is better than your taste in candles.‚Äù
    </p>
  </div>

  <!-- ADA Modal Command UI -->
  <div id="ada-modal" style="display:none;position:fixed;top:50%;left:50%;
    transform:translate(-50%,-50%);z-index:9999;background:#111;padding:20px;
    border-radius:10px;box-shadow:0 0 20px rgba(0,0,0,0.8);width:90%;
    max-width:600px;height:80%;color:#0ff;font-family:monospace;">

    <div id="ada-log" style="height:70%;overflow-y:auto;padding:10px;
          background:#000;border:1px solid #333;margin-bottom:10px;">
      ADA: I'm here to assist you.
    </div>

    <!-- Button-Based Command Interface -->
    <div id="ada-buttons" style="display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-bottom:10px;">
      <button onclick="handleAdaCommand('map')">üó∫ Map</button>
      <button onclick="handleAdaCommand('move')">üö™ Move</button>
      <button onclick="openItemUsePopup()">üéí Use Item</button>
      <button onclick="handleAdaCommand('inventory')">üì¶ Inventory</button>
      <button onclick="openGuess()">üëª Guess Ghost</button>
      <button onclick="handleAdaCommand('end')">üö´ End</button>
    </div>

    <div id="status-bar">
      Turn: <span id="turn-counter">0</span> | Sanity: <span id="sanity-bar">100</span>%
    </div>
  </div>

  <!-- Game State UI -->
  <div id="game-state" style="margin-top:20px;color:#0f0;font-family:monospace;"></div>
  <div id="game-ui"
       style="display:none;margin-top:20px;border:1px solid #0ff;
              padding:10px;color:#0ff;font-family:monospace;background:#000;">
  </div>

  <!-- Ghost Guess Modal -->
  <div id="guess-popup" style="display:none;position:fixed;top:50%;left:50%;
    transform:translate(-50%,-50%);background:#111;padding:20px;
    border-radius:10px;border:2px solid #0ff;z-index:10000;width:90%;max-width:600px;">
    <h2 style="color:#0ff;text-align:center;">Who do you think the ghost is?</h2>
    <div id="guess-list" style="max-height:300px;overflow-y:auto;display:grid;
        grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:6px;margin-top:12px;"></div>
    <button onclick="closeGuess()" style="margin-top:12px;background:#000;
      border:1px solid #0ff;color:#0ff;padding:6px 12px;cursor:pointer;">Cancel</button>
  </div>

  <!-- Item Use Popup -->
  <div id="item-use-popup" style="display:none;position:fixed;top:50%;left:50%;
    transform:translate(-50%,-50%);background:#111;padding:20px;
    border-radius:10px;border:2px solid #0ff;z-index:10000;width:90%;max-width:400px;">
    <h2 style="color:#0ff;text-align:center;">Select an item to use</h2>
    <div id="item-use-list" style="margin-top:12px;display:flex;
      flex-direction:column;gap:8px;"></div>
    <button onclick="closeItemUsePopup()" style="margin-top:12px;background:#000;
      border:1px solid #0ff;color:#0ff;padding:6px 12px;cursor:pointer;">Cancel</button>
  </div>

  <!-- Game End Modal -->
  <div id="end-screen" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
    background:#111; border:2px solid #0ff; padding:20px; z-index:9999; color:#0ff; font-family:monospace;
    text-align:center;">
    <div id="end-message" style="margin-bottom:12px;"></div>
    <button onclick="startNewGame()">üîÅ Start New Game</button>
  </div>
<script>
// === Initialization ===
const logBox = document.getElementById('ada-log');
const turnCounter = document.getElementById('turn-counter');
const sanityBar = document.getElementById('sanity-bar');
const gameUI = document.getElementById('game-ui');

// === ADA Boot ===
function startAda() {
  document.getElementById('main-menu').style.display = 'none';
  document.getElementById('ada-modal').style.display = 'block';
  simulateTyping(introDialogues[Math.floor(Math.random() * introDialogues.length)], "Deo");
}

// === Simulated Typing Output ===
function simulateTyping(text, from = "ADA") {
  const line = document.createElement("div");
  line.innerHTML = `<strong>${from}:</strong> `;
  const span = document.createElement("span");
  const cursor = document.createElement("span");
  cursor.setAttribute("id", "ada-typing");
  cursor.textContent = "|";
  line.appendChild(span);
  line.appendChild(cursor);
  logBox.appendChild(line);
  logBox.scrollTop = logBox.scrollHeight;

  let i = 0;
  function typeChar() {
    if (i < text.length) {
      span.textContent += text[i++];
      logBox.scrollTop = logBox.scrollHeight;
      setTimeout(typeChar, 18 + Math.random() * 30);
    } else {
      cursor.remove();
    }
  }
  typeChar();
}

// === Command Handler ===
function handleAdaCommand(cmd) {
  simulateTyping("> " + cmd, "You");
  const result = respondTo(cmd);
  setTimeout(() => simulateTyping(result), 300);
}

// === Game Response Parser ===
function respondTo(cmd) {
  const command = cmd.toLowerCase().trim();
  if (!command) return "";

  game.turn++;
  updateStatus();

  if (command === "start") {
    game.started = true;
    game.active = true;
    const keys = Object.keys(ghostProfiles);
    game.ghost = keys[Math.floor(Math.random() * keys.length)];
    gameUI.style.display = 'block';
    return "Investigation begins. Use commands like 'move', 'map', or 'use item'.";
  }

  if (command === "map") return renderMap();
  if (command === "inventory") return "Inventory: " + game.inventory.join(", ");

  if (command === "move") {
    const [x, y] = game.position;
    game.position = [x, (y + 1) % 3];
    game.sanity = Math.max(0, game.sanity - 5);
    updateStatus();
    return ghostProfiles[game.ghost].behavior + " " + renderMap();
  }

  if (command.startsWith("use ")) {
    const item = command.split("use ")[1].trim().toLowerCase();
    if (!game.inventory.map(i => i.toLowerCase()).includes(item)) {
      return "You don't have that item.";
    }
    if (item === "smudge") {
      game.sanity += 10;
      removeItem(item);
      return "You used a Smudge Stick. The air clears slightly.";
    }
    return "You used the " + item + ".";
  }

  if (command === "end") {
    game.started = false;
    game.active = false;
    document.getElementById("end-message").textContent = "The ghost was a " + game.ghost.toUpperCase() + ".";
    document.getElementById("end-screen").style.display = "block";
    return "Investigation ended.";
  }

  return "Unknown command.";
}

// === Map Renderer ===
function renderMap() {
  let result = "";
  for (let i = 0; i < game.map.length; i++) {
    for (let j = 0; j < game.map[i].length; j++) {
      result += (i === game.position[0] && j === game.position[1]) ? "‚óè " : game.map[i][j] + " ";
    }
    result += "<br>";
  }
  return result;
}

function updateStatus() {
  turnCounter.textContent = game.turn;
  sanityBar.textContent = game.sanity;
}

function removeItem(name) {
  const i = game.inventory.findIndex(i => i.toLowerCase() === name.toLowerCase());
  if (i !== -1) game.inventory.splice(i, 1);
}

// === Item Use Popup ===
function openItemUsePopup() {
  const container = document.getElementById("item-use-list");
  container.innerHTML = "";
  game.inventory.forEach(item => {
    const btn = document.createElement("button");
    btn.textContent = item;
    btn.onclick = () => {
      closeItemUsePopup();
      handleAdaCommand("use " + item.toLowerCase());
    };
    container.appendChild(btn);
  });
  document.getElementById("item-use-popup").style.display = "block";
}

function closeItemUsePopup() {
  document.getElementById("item-use-popup").style.display = "none";
}

// === Ghost Guessing ===
function openGuess() {
  const popup = document.getElementById("guess-popup");
  const list = document.getElementById("guess-list");
  list.innerHTML = "";

  Object.keys(ghostProfiles).forEach(g => {
    const btn = document.createElement("button");
    btn.textContent = g.toUpperCase();
    btn.onclick = () => {
      closeGuess();
      makeGuess(g);
    };
    list.appendChild(btn);
  });

  popup.style.display = "block";
}

function closeGuess() {
  document.getElementById("guess-popup").style.display = "none";
}

function makeGuess(g) {
  if (g === game.ghost) {
    endGame("Correct! The ghost was a " + g.toUpperCase() + ".");
  } else {
    endGame("Incorrect. The ghost was actually " + game.ghost.toUpperCase() + ".");
  }
}

function endGame(message) {
  simulateTyping(message);
  game.started = false;
  game.active = false;
  document.getElementById("end-message").textContent = message;
  document.getElementById("end-screen").style.display = "block";
}

function startNewGame() {
  location.reload();
}
</script>
<script>
// === Orb Animation ===
const canvas = document.getElementById('orb-canvas');
const ctx = canvas.getContext('2d');
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;

function createOrb() {
  return {
    x: Math.random() * width,
    y: Math.random() * height,
    vx: (Math.random() - 0.5) * 1.0,
    vy: (Math.random() - 0.5) * 1.0,
    baseRadius: Math.random() * 2 + 1,
    radius: 1,
    opacity: 0,
    fadeIn: true,
    tick: 0,
    changeInterval: Math.floor(Math.random() * 150 + 50)
  };
}

let orbs = Array.from({ length: 10 }, createOrb);

function animateOrbs() {
  ctx.clearRect(0, 0, width, height);
  for (let orb of orbs) {
    orb.tick++;
    orb.radius = orb.baseRadius + Math.sin(orb.tick / 30) * 0.5;

    orb.opacity += orb.fadeIn ? 0.01 : -0.001;
    if (orb.fadeIn && orb.opacity >= 0.7) {
      orb.opacity = 0.7;
      orb.fadeIn = false;
    }

    if (Math.random() < 0.002) orb.opacity = Math.min(1, orb.opacity + 0.1);
    if (orb.opacity <= 0.01) Object.assign(orb, createOrb());

    if (orb.tick % orb.changeInterval === 0) {
      const angle = Math.random() * 2 * Math.PI;
      const speed = Math.hypot(orb.vx, orb.vy);
      orb.vx = orb.vx * 0.8 + Math.cos(angle) * speed * 0.2;
      orb.vy = orb.vy * 0.8 + Math.sin(angle) * speed * 0.2;
    }

    orb.x += orb.vx;
    orb.y += orb.vy;

    if (orb.x - orb.radius <= 0 || orb.x + orb.radius >= width) orb.vx *= -1;
    if (orb.y - orb.radius <= 0 || orb.y + orb.radius >= height) orb.vy *= -1;

    ctx.beginPath();
    ctx.arc(orb.x, orb.y, orb.radius, 0, Math.PI * 2);
    ctx.fillStyle = `rgba(255,255,255,${orb.opacity})`;
    ctx.shadowColor = `rgba(255,255,255,${orb.opacity * 0.6})`;
    ctx.shadowBlur = 10 + orb.opacity * 10;
    ctx.fill();
  }

  requestAnimationFrame(animateOrbs);
}
animateOrbs();

window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});
</script>

<script>
// === Lightning Flash ===
function lightningFlash() {
  const flash = document.getElementById('flash-overlay');
  flash.style.opacity = '0.4';
  setTimeout(() => { flash.style.opacity = '0'; }, 100);
}

setInterval(() => {
  setTimeout(lightningFlash, Math.random() * 2000);
}, 10000);
</script>

<footer>
  Shark‚ÄëBlades ‚Äî <span style="color:#0ff;">Phasma‚ÄëPhoney</span> ‚Äî Turn-based ghost hunting web game.
  <span class="version-tag" onclick="alert('Build v1.2.3 ‚Äî Includes ghost guessing, item logic, ambient visuals, and ADA interface.')">
    Build v1.2.3
  </span>
</footer>

</body>
</html>

